<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Inside Sphere VR</title>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

<style>
html,body{
  margin:0;
  padding:0;
  overflow:hidden;
  background:black;
  height:100vh;
  font-family:Arial;
}

.scene{
  width:100vw;
  height:100vh;
  perspective:1200px;
  overflow:hidden;
}

.camera{
  width:100%;
  height:100%;
  transform-style:preserve-3d;
  position:relative;
}

.star{
  position:absolute;
  width:4px;
  height:4px;
  background:white;
  border-radius:50%;
  opacity:0.8;
}

.red{
  background:red;
  width:8px;
  height:8px;
  box-shadow:0 0 25px red;
  cursor:pointer;
}

.popup{
  position:fixed;
  top:50%;
  left:50%;
  transform:translate(-50%,-50%);
  background:#111;
  border:2px solid red;
  padding:25px;
  border-radius:12px;
  display:none;
  text-align:center;
  color:white;
  z-index:9999;
  box-shadow:0 0 30px red;
}

.popup i{
  font-size:40px;
  color:red;
}

.popup button{
  margin-top:15px;
  padding:8px 15px;
  background:red;
  border:none;
  color:white;
  cursor:pointer;
}

button{
  position:fixed;
  top:20px;
  left:20px;
  z-index:999;
}
.reload {
  bottom: calc(15px + env(safe-area-inset-bottom));
 right: calc(15px + env(safe-area-inset-right));
  position: fixed;
  width: 30px;
  height: 30px;
  z-index: 9999;
  background: red;
  border: none;
  border-radius: none;
  cursor: pointer;
  box-shadow: 0 0 10px red;
  padding: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 14px;
}

</style>
</head>
<body>

<button onclick="enableGyro()">Aktifkan Gyro+randomizer</button>

<div class="scene">
  <div class="camera" id="camera"></div>
</div>

<div class="popup" id="popup">
  <i class="fas fa-triangle-exclamation"></i>
  <h2>WARNING</h2>
  <p>Kamu menemukan bintang merah ðŸŒŒ</p>
  <button onclick="popup.style.display='none'">Tutup</button>
</div>
<script>
let camera = document.getElementById("camera");
let popup = document.getElementById("popup");

let total = 800;
let radius = 500;
let redIndex = Math.floor(Math.random()*total);

for(let i=0;i<total;i++){
  let star = document.createElement("div");
  star.className="star";

  if(i===redIndex){
    star.classList.add("red");
    star.onclick=()=> popup.style.display="block";
  }

  // posisi di permukaan bola bagian dalam
  let theta = Math.random()*2*Math.PI;
  let phi = Math.acos((Math.random()*2)-1);

  let x = radius * Math.sin(phi) * Math.cos(theta);
  let y = radius * Math.sin(phi) * Math.sin(theta);
  let z = radius * Math.cos(phi);

  // dibalik supaya kita ada di dalam sphere
  star.style.transform =
    `translate3d(${x}px,${y}px,${z}px)`;

  camera.appendChild(star);

  // gerak kecil random pelan
  setInterval(()=>{
    let dx=(Math.random()-0.5)*5;
    let dy=(Math.random()-0.5)*5;
    let dz=(Math.random()-0.5)*5;
    star.style.transform=
    `translate3d(${x+dx}px,${y+dy}px,${z+dz}px)`;
  },4000);
}
async function warpReload(){

  let stars = document.querySelectorAll(".star");

  // MODE SUPER CEPAT ðŸš€
  stars.forEach(star=>{
    star.style.transition = "transform 0.2s linear";
    star.style.transform += " scale(3)";
  });

  // animasi terbang cepat random
  for(let i=0;i<10;i++){
    stars.forEach(star=>{
      star.style.left = Math.random()*200 + "vw";
      star.style.top = Math.random()*200 + "vh";
      star.style.transform = `translateZ(${Math.random()*4000-2000}px) scale(3)`;
    });
    await new Promise(r=>setTimeout(r,50));
  }

  // Balik normal + random final
  stars.forEach(star=>{
    star.style.transition = "transform 0.5s ease";
    star.style.left = Math.random()*200 + "vw";
    star.style.top = Math.random()*200 + "vh";
    star.style.transform = `translateZ(${Math.random()*2000-1000}px) scale(1)`;
  });

}
/* ROTATION */
let rotX=0,rotY=0;

function enableGyro(){
  if(typeof DeviceOrientationEvent.requestPermission==="function"){
    DeviceOrientationEvent.requestPermission()
    .then(p=>{
      if(p==="granted"){
        window.addEventListener("deviceorientation",handle);
      }
    });
  }else{
    window.addEventListener("deviceorientation",handle);
  }
  warpReload()
}

function handle(e){
  rotX=e.beta;
  rotY=e.gamma;
  camera.style.transform=
    `rotateX(${rotX}deg) rotateY(${rotY}deg)`;
}

/* mouse support */
let drag=false,lastX,lastY;

document.addEventListener("mousedown",e=>{
  drag=true;
  lastX=e.clientX;
  lastY=e.clientY;
});
document.addEventListener("mouseup",()=>drag=false);
document.addEventListener("mousemove",e=>{
  if(!drag)return;
  rotY+=(e.clientX-lastX)*0.3;
  rotX-=(e.clientY-lastY)*0.3;
  camera.style.transform=
    `rotateX(${rotX}deg) rotateY(${rotY}deg)`;
  lastX=e.clientX;
  lastY=e.clientY;
});
</script>

</body>
</html>
